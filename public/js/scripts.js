/* Menu array */
var menu = {
    "indica": [
        {
            "id": "0",
            "name": "Mulholland OG",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$55",
            "fourthprice": "$110",
            "halfprice": "- - -",
            "ozprice": "- - -",
            "description": "hella dank"
        },
        {
            "id": "1",
            "name": "Girl Scout Cookies",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$45",
            "fourthprice": "$90",
            "halfprice": "- - -",
            "ozprice": "- - -",
            "description": "hella dank"
        },
        {
            "id": "2",
            "name": "White Walker",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "- - -",
            "ozprice": "- - -",
            "description": "hella dank"
        },
        {
            "id": "3",
            "name": "Sunset Sherbet",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$35",
            "fourthprice": "$65",
            "halfprice": "$120",
            "ozprice": "$200",
            "description": "hella dank"
        },
        {
            "id": "4",
            "name": "KushCo OG",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$55",
            "fourthprice": "$110",
            "halfprice": "- - -",
            "ozprice": "- - -",
            "description": "hella dank"
        },
        {
            "id": "5",
            "name": "Skywalker OG",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$45",
            "fourthprice": "$90",
            "halfprice": "- - -",
            "ozprice": "- - -",
            "description": "hella dank"
        },
        {
            "id": "6",
            "name": "Holy Grail OG",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "- - -",
            "ozprice": "- - -"
        },
        {
            "id": "7",
            "name": "Pure OG",
            "type": "indica",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$35",
            "fourthprice": "$65",
            "halfprice": "$120",
            "ozprice": "$200"
        }
    ],
    "sativa": [
        {
            "id": "0",
            "name": "Pineapple Express",
            "type": "sativa",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$45",
            "fourthprice": "$90",
            "halfprice": "$160",
            "ozprice": "- - -"
        },
        {
            "id": "1",
            "name": "Baby Blue",
            "type": "sativa",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$45",
            "fourthprice": "$90",
            "halfprice": "$160",
            "ozprice": "$260"
        },
        {
            "id": "2",
            "name": "Banana Split",
            "type": "sativa",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$45",
            "fourthprice": "$90",
            "halfprice": "- - -",
            "ozprice": "- - -"
        },
        {
            "id": "3",
            "name": "Strawberry Banana",
            "type": "sativa",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "$150",
            "ozprice": "- - -"
        },
        {
            "id": "4",
            "name": "Supreme Blue Dream",
            "type": "sativa",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "$140",
            "ozprice": "$260"
        }
    ],
    "hybrid": [
        {
            "id": "0",
            "name": "Thin Mint",
            "type": "Hybrid",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "$140",
            "ozprice": "- - -"
        },
        {
            "id": "1",
            "name": "Forum Cookies",
            "type": "Hybrid",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "$140",
            "ozprice": "- - -"
        },
        {
            "id": "2",
            "name": "Purple Kryptonite",
            "type": "Hybrid",
            "eighth": "1/8 oz",
            "fourth": "1/4 oz",
            "half": "1/2 oz",
            "oz": "1 oz",
            "eighthprice": "$40",
            "fourthprice": "$80",
            "halfprice": "$150",
            "ozprice": "$260"
        }
    ],
    "concentrate": [
        {
            "id": "0",
            "name": "Nug Run - White Walker (Shatter)",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$26",
            "oneprice": "$48",
            "twoprice": "$92"
        },
        {
            "id": "1",
            "name": "Skywalker OG Shatter",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$45",
            "twoprice": "$85"
        },
        {
            "id": "2",
            "name": "Green Crack Shatter",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$45",
            "twoprice": "$85"
        },
        {
            "id": "3",
            "name": "Animal Spirits - Holy Grail OG Vape Cartridge",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$40",
            "twoprice": "$92"
        },
        {
            "id": "4",
            "name": "Animal Spirits - Girl Scout Cookies Vape Cartridge",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$40",
            "twoprice": "- - -"
        },
        {
            "id": "5",
            "name": "Animal Spirits - Blue Dream Vape Cartridge",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$40",
            "twoprice": "$80"
        },
        {
            "id": "6",
            "name": "Blue Dream Shatter",
            "type": "concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "$25",
            "oneprice": "$45",
            "twoprice": "$85"
        },
        {
            "id": "7",
            "name": "Brass Knuckles - Jack Herer",
            "type": "sativa concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "8",
            "name": "Brass Knuckles - Strawberry Cough",
            "type": "sativa concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "9",
            "name": "Brass Knuckles - Candy Apple",
            "type": "hybrid concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "10",
            "name": "Brass Knuckles - Blue Dream",
            "type": "sativa concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "11",
            "name": "Brass Knuckles - Gorilla Glue",
            "type": "hybrid concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "12",
            "name": "Brass Knuckles - Girl Scout Cookies",
            "type": "hybrid concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "13",
            "name": "Brass Knuckles - Raw",
            "type": "hybrid concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "14",
            "name": "Brass Knuckles - Abracadabra",
            "type": "hybrid concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "15",
            "name": "Brass Knuckles - Blueberry",
            "type": "indica concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "16",
            "name": "Brass Knuckles - Grape Ape",
            "type": "indica concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "17",
            "name": "Brass Knuckles - Purple Haze",
            "type": "sativa concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "18",
            "name": "Brass Knuckles - SFV OG",
            "type": "indica concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        },
        {
            "id": "19",
            "name": "Brass Knuckles - Skywalker OG",
            "type": "indica concentrate",
            "half": "0.5 g",
            "one": "1 g",
            "two": "2 g",
            "halfprice": "- - -",
            "oneprice": "$60",
            "twoprice": "- - -"
        }
    ],
    "edible": [
        {
            "id": "0",
            "name": "Kiva - Ginger Dark Chocolate",
            "type": "edible",
            "per": "each",
            "price": "$32"
        },
        {
            "id": "1",
            "name": "Kiva Bar - 4 Flavors",
            "type": "edible",
            "per": "each",
            "price": "$20"
        },
        {
            "id": "2",
            "name": "Kiva - Expresso Dark Chocolate",
            "type": "edible",
            "per": "each",
            "price": "$20"
        },
        {
            "id": "3",
            "name": "Kiva - Terra Bites - Expresso Beans",
            "type": "edible",
            "per": "each",
            "price": "$18"
        },
        {
            "id": "4",
            "name": "Kiva - Terra Bites - Blueberries",
            "type": "edible",
            "per": "each",
            "price": "$18"
        },
        {
            "id": "5",
            "name": "Kiva Bar",
            "type": "edible",
            "per": "each",
            "price": "$18"
        },
        {
            "id": "6",
            "name": "HealthCare Bar - Vegan",
            "type": "edible",
            "per": "each",
            "price": "$10"
        }
    ],
    "gear": [
        {
            "id": "0",
            "name": "Brass Knuckes - Adjustable Voltage Gold Battery",
            "type": "gear",
            "per": "each",
            "price": "$30"
        },
        {
            "id": "1",
            "name": "Brass Knuckes - Gold Vape Battery",
            "type": "gear",
            "per": "each",
            "price": "$25"
        },
        {
            "id": "2",
            "name": "Brass Knuckes - Woodgrain Battery",
            "type": "gear",
            "per": "each",
            "price": "$25"
        }
    ]
};

/* Opens home */
function home() {
    window.location.href = "/";
}

/* Opens Product Modal */
function openProductModal(id) {
    var type = $('.strains-text').html();
    var item = menu[type][id];
    var name = $('#product-modal-name');

    name.html(item.name);

    if (item.description) {
        $('#product-modal-desc').html(item.description);
    }

    if (item.type) {
        $('#product-modal-strain').html(item.type);
    }

    if (!(item.eighth)) {
        $('#product-modal-eighth').addClass('hide');
    } else {
        $('#product-modal-eighth').removeClass('hide');
        $('#product-modal-eighth').html(item.eighth + '<br>' + item.eighthprice);
    }

    if (!(item.fourth)) {
        $('#product-modal-fourth').addClass('hide');
    } else {
        $('#product-modal-fourth').removeClass('hide');
        $('#product-modal-fourth').html(item.fourth + "<br>" + item.fourthprice);
    }

    if (!(item.half)) {
        $('#product-modal-half').addClass('hide');
    } else {
        $('#product-modal-half').removeClass('hide');
        $('#product-modal-half').html(item.half + "<br>" + item.halfprice);
    }

    if (!(item.oz)) {
        $('#product-modal-oz').addClass('hide');
    }
    else {
        $('#product-modal-oz').removeClass('hide');
        $('#product-modal-oz').html(item.oz + "<br>" + item.ozprice);
    }

    if (!(item.one)) {
        $('#product-modal-one').addClass('hide');
    }
    else {
        $('#product-modal-one').removeClass('hide');
        $('#product-modal-one').html(item.one + "<br>" + item.oneprice);
    }

    if (!(item.two)) {
        $('#product-modal-two').addClass('hide');
    } else {
        $('#product-modal-two').removeClass('hide');
        $('#product-modal-two').html(item.two + "<br>" + item.twoprice);
    }

    if (!(item.per)) {
        $('#product-modal-per').addClass('hide');
    } else {
        $('#product-modal-per').removeClass('hide');
        $('#product-modal-per').html(item.per + "<br>" + item.price);
    }

    $('#product-modal').modal('open');

    var quantityButton = document.querySelectorAll('#product-modal .quantity');
    for (var i = 0; i < quantityButton.length; i++) {
        quantityButton[i].addEventListener('click', selectQuantity);
    }

    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        $('#product-modal').addClass(' bottom-sheet');
        $('#product-modal').css({'max-height': '90%', 'padding': '0 !important', 'transform': 'none !important'});
        $('#product-modal').modal({
            dismissible: true,
            inDuration: 300,
            outDuration: 200
        });
    } else {
        $('#product-modal').removeClass(' bottom-sheet');
        $('#product-modal').css({
            'max-height': '80%',
            'padding': '0 !important',
            'transform': 'translateY(-50%) !important'
        });
        $('#product-modal').modal({
            dismissible: true,
            inDuration: 300,
            outDuration: 200,
            endingTop: '10%'
        });
    }
}

// show selection of quantity
function selectQuantity() {
    if ($(this).css('background-color') == 'rgb(234, 246, 255)') {
        console.log('hello');
        $(this).css('background-color', '#FFFFFF');
    } else {
        $(this).css({'background-color': '#EAF6FF', 'color': '#000000'});
        $(this).siblings().css({'background-color': '#FFFFFF', 'color': '#000000'});
    }
}

// close product modal when open cart modal
function closeModal() {
    $('#product-modal').modal('close');
    $('#cart-modal').modal('open');
}

function stickyContactUs() {
    var windowBottom = $(window).scrollTop() + $(window).height();
    var divBottom = $('#footer-anchor').offset().top;
    var footer = $('.contact-us-footer');

    if (windowBottom < divBottom) {
        footer.addClass('sticky');
        footer.removeClass('not-sticky');
    } else {
        footer.addClass('not-sticky');
        footer.removeClass('sticky');
    }
}

function stickyMenuBar() {
    var windowTop = $(window).scrollTop();
    var divTop = $('#tabs-anchor').offset().top;
    var tabs = $('#xaler-menu-tabs');

    if (windowTop > divTop) {
        tabs.addClass('sticky');
        tabs.removeClass('not-sticky');
    } else {
        tabs.addClass('not-sticky');
        tabs.removeClass('sticky');
    }
}

$(document).ready(function () {
    /* Tabs */
    $('ul.tabs').tabs();

    /* Carousel */
    $('.carousel.carousel-slider').carousel({fullWidth: true});

    $(".menu-button").sideNav({
        menuWidth: 300,
        edge: 'left',
        closeOnClick: true,
        draggable: true
    });

    $('.cart-button').sideNav({
        menuWidth: 300,
        edge: 'right',
        closeOnClick: true,
        draggable: true
    });

    $('#cart-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%',
        ready: function (modal) {
            setTimeout(function () {
                $('#cart-modal').modal('close');
            }, 800); // slightly buggy, click add to cart, then click out, then click another one; it'll be hidden
        }
    });

    $('#delivery-area-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $('#email-sub-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $('#student-discount-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $('#ftp-discount-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $('#military-discount-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $('#referral-discount-modal').modal({
        dismissible: true,
        inDuration: 300,
        outDuration: 200,
        endingTop: '50%'
    });

    $("#xaler-nav").click(function () {
        $('html, body').animate({
            scrollTop: $("#xaler-grown").offset().top - 40
        }, 500);
    });

    $("#menu-nav").click(function () {
        $('html, body').animate({
            scrollTop: $("#menu").offset().top - 40
        }, 500);
    });

    // Remove blank labeled buttons
    var quantityButton = document.querySelectorAll('#indexProduct .quantity');
    for (var i = 0; i < quantityButton.length; i++) {
        quantityButton[i].addEventListener('click', selectQuantity);
        // if(quantityButton[i].textContent == ''){
        //   quantityButton[i].style.display = 'none';
        // }
    }

    //close Modal when add to cart
    $('#product-modal .add-cart-btn').click(closeModal);

    // Contact Us Stickied
    $(window).scroll(stickyContactUs);
    stickyContactUs();

    // Menu Tab Stickied
    // $(window).scroll(stickyMenuBar);
    // stickyMenuBar();
});
